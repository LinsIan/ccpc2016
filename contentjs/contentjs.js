$(document).ready(function(){$("#menu").on("shown",function(a){window.location.hash=a.target.hash+"-pn";$(this).find("a[data-toggle=tab]").removeClass("a:hover");$("#register-section").hide();$("#main-section").show()});if($.browser.msie){if($.browser.version<9&&window.PIE)$(".nav a, #btn-register").each(function(){PIE.attach(this)});$("a").attr("hideFocus",true);$("input[placeholder], textarea[placeholder]").not(":password").placeholder()}$("#register-section").hide();$("#btn-register").click(function(){if($.browser.version<9){$("#menu").find("a[data-toggle=tab]").removeClass("a:active");$("#main-section").hide();$("#register-section").show()}else{$("#main-section").hide("drop",function(){$("#register-section").show("drop")})}$("#menu>li").removeClass("active");window.location.hash="register"+"-pn"});var a=window.location.hash.match(/#[\w\d-]+/);if(a=="#register-pn")$("#btn-register").click();else if(a!=null)$("#menu").find("a[data-toggle=tab][href="+a[0].slice(0,-3)+"]").tab("show");else $("#menu").find("a[data-toggle=tab]:first").tab("show");$(".iframe").fancybox({autoScale:false,transitionIn:"elastic",transitionOut:"elastic",height:600,width:800});$(".inlinebox").fancybox({autoScale:true,transitionIn:"elastic",transitionOut:"elastic",padding:5});$("#display-rule-btn").click(function(){$('a[href="#rule"]').tab("show")});$("#display-traffic-btn").click(function(){$('a[href="#traffic"]').tab("show")});$("a.map-url").attr("href","http://maps.google.com.tw/maps?f=q&source=s_q&hl=zh-TW&geocode=&q=%E5%BD%B0%E5%8C%96%E5%B8%AB%E7%AF%84%E5%A4%A7%E5%AD%B8&aq=&sll=24.082003,120.557231&sspn=0.064334,0.106173&brcurrent=3,0x346938e5f385d5a1:0xe2e6f2408b5b01db,0,0x3469491eb5791475:0xd6e84b58ba347f27&ie=UTF8&hq=%E5%BD%B0%E5%8C%96%E5%B8%AB%E7%AF%84%E5%A4%A7%E5%AD%B8&t=m&ll=24.081966,120.55727&spn=0.047016,0.068579&z=14&iwloc=A&output=embed")});$(function(){var a=$("#message-alert-msg");a.hide();a.find(".close").click(function(){a.fadeOut()});$("#message-form").ajaxForm({dataType:"json",beforeSubmit:function(){a.hide();a.removeClass("alert-success");a.removeClass("alert-error")},success:function(b){a.find(".msg-content").text("");if(b.length==0){a.addClass("alert-success");a.find(".alert-heading").text("留言成功");a.fadeIn("fast");$("#message-form").clearForm();setTimeout("window.location.reload()",1e3)}else{a.addClass("alert-error");a.find(".alert-heading").text("資料有誤，請確認：");for(var c=0;c<b.length;c++)a.find(".msg-content").append(b[c]+"<br>");a.fadeIn()}if($.browser.msie&&$.browser.version<9)$("input[placeholder], textarea[placeholder]").not(":password").placeholder()}});$("#message-form").hide();$("#wantPostBtn").click(function(){$("#message-form").slideToggle(500)});$("#message-pages").pager(".msg-page",{navClass:"page-nav",height:$.browser.msie&&$.browser.version<=9?620:null})});$(function(){var a=$("#register-alert-msg");a.hide();a.find(".close").click(function(){a.fadeOut()});$("#register-form").ajaxForm({dataType:"json",beforeSubmit:function(){$("#register-section").block({message:null});a.hide();a.removeClass("alert-success");a.removeClass("alert-error")},success:function(b){$("#register-section").unblock();$(window).scrollTop(0);a.find(".msg-content").text("");if(b.length==0){a.addClass("alert-success");a.find(".alert-heading").text("報名成功");a.find(".msg-content").append("請至您填寫的Email收取參賽注意事項及匯款資訊");$("#register-form").hide();window.location.hash="team-modify-pn";setTimeout("window.location.reload()",5e3)}else{a.addClass("alert-error");a.find(".alert-heading").text("資料有誤，請確認：");for(var c=0;c<b.length;c++)a.find(".msg-content").append(b[c]+"<br>")}a.fadeIn();if($.browser.msie&&$.browser.version<9)$("input[placeholder], textarea[placeholder]").not(":password").placeholder()}});$("#display-rule-content").fancybox({autoScale:false,transitionIn:"elastic",transitionOut:"elastic",content:"<div style='width: 800px;'>"+$("#contest-rule").html()+"</div>"})});$(function(){$("#registered-pages").pager(".team-page",{navClass:"page-nav",height:$.browser.msie&&$.browser.version<=9?640:null})});$(function(){function c(){$.cookie("team_name",null);$.cookie("university",null);$.cookie("department",null);$.cookie("cellphone",null);$.cookie("is_paid",null);for(i=1;i<=3;i++){$.cookie("member_name_"+i,null);$.cookie("member_num_"+i,null)}}function b(){var a=$("#modify-team-form");a.find(":input[name=team_name]").val($.cookie("team_name"));a.find(":input[name=university]").val($.cookie("university"));a.find(":input[name=department]").val($.cookie("department"));a.find(":input[name=email]").val("禁止修改電子郵件，有特殊需求請聯絡管理員").attr("disabled",true);a.find(":input[name=cellphone]").val($.cookie("cellphone"));for(i=1;i<=3;i++){a.find(":input[name=member_name_"+i+"]").val($.cookie("member_name_"+i));a.find(":input[name=member_num_"+i+"]").val($.cookie("member_num_"+i))}if($.cookie("is_paid")=="1")$("#modify-pay-info").hide();else $("#modify-pay-info").show()}$("#modify-team").hide();$("#modify-alert-msg").hide();$(":checkbox[name=is_paid]").click(function(){if(!$(":checkbox[name=is_paid]").attr("checked")){$(":input[name=remit_account]").val("").attr("disabled",true)}else{$(":input[name=remit_account]").attr("disabled",false);alert("此項目一經填寫後即不可修改，請謹慎填寫。")}});$("#ter-modify").click(function(){$("#modify-team").fadeOut("middle",function(){$("#login-modify").fadeIn("middle");$("#login-modify-form").clearForm();c()})});var a=$("#modify-alert-msg");a.find(".close").click(function(){a.fadeOut()});$("#login-modify-form").ajaxForm({dataType:"json",beforeSubmit:function(){a.hide();a.removeClass("alert-success");a.removeClass("alert-error")},success:function(d){$(window).scrollTop(0);a.find(".msg-content").text("");if(d.length==0){a.hide();b();c();$("#login-modify").fadeOut("middle",function(){$("#modify-team").fadeIn("middle")})}else{a.addClass("alert-error");a.find(".alert-heading").text("登入失敗，請確認：");for(var e=0;e<d.length;e++)a.find(".msg-content").append(d[e]+"<br>");a.fadeIn()}if($.browser.msie&&$.browser.version<9)$("input[placeholder], textarea[placeholder]").not(":password").placeholder()}});$("#modify-team-form").ajaxForm({dataType:"json",beforeSubmit:function(){a.hide();a.removeClass("alert-success");a.removeClass("alert-error");$("#main-content").block({message:null})},success:function(b){$("#main-content").unblock();$(window).scrollTop(0);a.find(".msg-content").text("");if(b.length==0||b.isLogout){a.hide();if(b.isLogout){a.addClass("alert-error");a.find(".alert-heading").text("更新失敗：");a.find(".msg-content").append("您有可能閒置太久，請重新登入<br>");a.fadeIn();c();$("#login-modify-form").clearForm();$("#modify-team").fadeOut("middle",function(){$("#login-modify").fadeIn("middle")})}else{a.addClass("alert-success");a.find(".alert-heading").text("更新成功！");a.fadeIn();$("#modify-team").hide();window.location.hash="";setTimeout("window.location.reload()",3e3)}}else{a.addClass("alert-error");a.find(".alert-heading").text("資料有誤，請確認：");for(var d=0;d<b.length;d++)a.find(".msg-content").append(b[d]+"<br>");a.fadeIn()}if($.browser.msie&&$.browser.version<9)$("input[placeholder], textarea[placeholder]").not(":password").placeholder()}})})